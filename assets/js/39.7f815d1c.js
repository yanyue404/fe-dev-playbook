(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{320:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"whistle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#whistle"}},[t._v("#")]),t._v(" Whistle")]),t._v(" "),s("blockquote",[s("p",[t._v("https://github.com/yanyue404/blog/issues/204")])]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"http://wproxy.org/whistle/webui/rules.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("whistle 官方文档"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("Whistle 最强大的代理服务器，与 Charles 相比我用 Whistle。")]),t._v(" "),s("h2",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("p",[t._v("whistle(读音[ˈwɪsəl]，拼音[wēisǒu])基于 Node 实现的跨平台 web 调试代理工具，类似的工具有 Windows 平台上的 Fiddler，主要用于查看、修改 HTTP、HTTPS、Websocket 的请求、响应，也可以作为 HTTP 代理服务器使用。")]),t._v(" "),s("h2",{attrs:{id:"操作步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),s("ol",[s("li",[t._v("pc 机 npm 安装 whistle；")]),t._v(" "),s("li",[t._v("pc 机安装 whistle https 根证书；")]),t._v(" "),s("li",[t._v("pc 机运行 whistle (w2 start)，配置浏览器代理 127.0.0.1:8899，浏览器访问 http://127.0.0.1:8899/ (至此完成 pc 机代理)")]),t._v(" "),s("li",[t._v("pc 机开启移动热点，获取本机 ip 地址；")]),t._v(" "),s("li",[t._v("ios 或 安卓设备连接热点，手动配置 pc 机 ip 代理；")]),t._v(" "),s("li",[t._v("扫码 或浏览器访问 rootca.pro，安装 whistle https 根证书，设置证书受信任；")]),t._v(" "),s("li",[t._v("真机访问 h5 类的目标域名网页，可以被 pc 机 whistle 代理成功捕获。（至此完成真机代理）")])]),t._v(" "),s("h2",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[t._v("#")]),t._v(" 下载")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装或更新")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" whistle\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者直接指定镜像安装：")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" whistle "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--registry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org\n")])])]),s("h2",{attrs:{id:"安装-whistle-证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-whistle-证书"}},[t._v("#")]),t._v(" 安装 whistle 证书")]),t._v(" "),s("p",[t._v("下载根证书，开启捕获 HTTPS 请求：")]),t._v(" "),s("img",{attrs:{src:"https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/https-proxy.png",width:"50%",height:"50%"}}),t._v(" "),s("p",[t._v("配置手机代理：")]),t._v(" "),s("p",[t._v("IP 地址由 观察 pc 机 ipconfig 获得。")]),t._v(" "),s("div",[s("img",{staticStyle:{"margin-right":"10px"},attrs:{src:"https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/phone1.jpg",width:"40%",height:"50%"}}),t._v(" "),s("img",{staticStyle:{float:"right"},attrs:{src:"https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/phone2.jpg",width:"40%",height:"50%"}})]),t._v(" "),s("p",[s("strong",[t._v("PC 机")])]),t._v(" "),s("p",[t._v("windows: 下载证书后，双击证书，根据指引安装证书。证书安装过程，要确保证书存储到受信任的根证书颁发机构下。")]),t._v(" "),s("p",[t._v("注意： 只有 HTTPS 为对勾时才说明根证书安装成功，可以成功代理 HTTPS 类型的请求。")]),t._v(" "),s("p",[s("strong",[t._v("IOS 设备")])]),t._v(" "),s("p",[t._v("手机设置代理后，Safari 地址栏输入 rootca.pro，按提示安装证书（或者通过 whistle 控制台的二维码扫码安装，iOS 安装根证书需要到连接远程服务器进行验证，需要暂时把 Https 拦截功能关掉）。")]),t._v(" "),s("p",[t._v("iOS 10.3 之后需要手动信任自定义根证书，设置路径：设置> 外观 > 关于本机> 证书信任设置")]),t._v(" "),s("p",[s("strong",[t._v("安卓设备")])]),t._v(" "),s("p",[t._v("手机设置代理后，证书通过二维码扫码安装或者浏览器地址栏 rootca.pro 按提示安装，安装成功后，需要手机将连接笔记本电脑的 wifi 设为 可信任网络才能正常抓取 https 网络请求。")]),t._v(" "),s("h2",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),s("p",[s("strong",[t._v("浏览器代理： 安装 Chrome 代理插件：（推荐安装 SwitchyOmega）")])]),t._v(" "),s("img",{attrs:{src:"https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/SwitchySharp.png",width:"50%",height:"50%"}}),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启代理监听 http://127.0.0.1:8899/")]),t._v("\nw2 start\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# filter， 在 Network 不会出现某些域名的请求")]),t._v("\n/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("traceback.tk.cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://traceback.tk.cn/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tia6.taikang.com/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://tia6.taikang.com/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" filter://hide\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# req ua")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("m.aliexpress.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://m.aliexpress.com/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ua://"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("wp_ua"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# reqHeaders，修改请求头")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("m.aliexpress.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://m.aliexpress.com/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" reqHeaders://"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("req-headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用 内置的 Weinre 调试移动端页面，然后选择菜单栏的 Weinre 进入看到调试界面了")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# http://127.0.0.1:8899/weinre/client/#test")]),t._v("\n\nhttp://www.qq.com/  weinre://test\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置规则（线上代理到本地调试）")]),t._v("\n//"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("m.tk.cn/tkproperty/prd/N20210002/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://m.tk.cn/tkproperty/prd/N20210002/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  localhost:3334/tkproperty/prd/N20210002/\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 单个文件代理到 values 面板（新建 local_reference.js 文件, 完全替换）")]),t._v("\n//"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mcdn.tk.cn/js/reference.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://mcdn.tk.cn/js/reference.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" resBody://"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("local_reference.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置 延迟响应的时间（单位：毫秒）")]),t._v("\nhttps://ecuat.tk.cn/tkol-api/tkcms/selectByProductId resDelay://3000\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改返回码，可以模拟接口出错")]),t._v("\nhttps://ecuat.tk.cn/tkol-api/tkcms/selectByProductId statusCode://500\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在网页中注入以 script 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 “Value” 下可找到：")]),t._v("\nhttps://wq.jd.com/ jsAppend://"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("test.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" https://wq.jd.com/ jsAppend:///Users/myname/test/test.js\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在网页中注入以 style 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 “Value” 下可找到：")]),t._v("\nhttps://wq.jd.com/ cssAppend://"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("test.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" https://wq.jd.com/ cssAppend:///Users/myname/test/test.css\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# log 日志分组")]),t._v("\nhttp://localhost:49804/tkproperty/nprd/N20210001/ log://N20210001\n\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// test.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" script "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jquery 注入成功"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"head"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// VConsole.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" script "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcdn.net/ajax/libs/vConsole/3.1.0/vconsole.min.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VConsole 注入成功"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VConsole")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* test.css */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("!important")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("values")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{wp_ua}\n  Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; RM-1113) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/13.10586\n\n{req-headers}\n  {\n    "X-Forwarded-For":" 188.146.171.71",\n    "X-Real-IP":" 188.146.171.71",\n    "X-Client-Scheme":"https",\n    "referer":"https://vk.com/",\n    "User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 AliApp(H/5)"\n  }\n')])])]),s("p",[s("strong",[t._v("其他命令")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看whistle的帮助信息")]),t._v("\n$ w2 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止 whistle：")]),t._v("\n$ w2 stop\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 whistle：")]),t._v("\n$ w2 restart\n")])])]),s("p",[s("strong",[t._v("Q&A")])]),t._v(" "),s("ol",[s("li",[t._v("证书信任问题\nQ: 苹果手机代理已配置，且已经信任证书打开调试显示无法链接？\nA: 苹果手机还需要手动开启 whistle 的证书信任。参下图手动开启。")])]),t._v(" "),s("img",{attrs:{src:"https://github.com/yanyue404/blog/blob/master/assets/whistle/trust-certificate.jpg?raw=true",width:"50%",height:"50%"}}),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("真机样式调试")])]),t._v(" "),s("p",[t._v("在标签栏选择 "),s("strong",[t._v("Weinre")]),t._v(" 标签进入，选择 Targets 的链接进入页面。")]),t._v(" "),s("p",[t._v("···bash\nhttps://f.tk.cn/tkproperty/nprd/N20220012/ weinre://0012")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\n\n## 真机代理\n\n**安卓设备**\n\n注意：\n\n1. 如果配置完代理，手机无法访问，可能是 whistle 所在的电脑防火墙限制了远程访问 whistle 的端口，关闭防火墙或者设置白名单。\n\n4. 安装证书后，如无法正常捕获请求，需要将连接笔记本电脑的 wifi 设为 **可信任网络**。\n\n**微信公众号**\n\n1. 启动 whistle 后，先配置**微信开发者工具**代理:\n\n最上边一栏 ---- 设置 ---- 代理设置 ---- 设置本机 ip 加 端口号 8899\n\n4. 设置代理规则\n\n```bash\n# 线上混淆代码代理到本地源码\n//mcdn.tk.cn/tk-online/assets/public-js/lib/property/wx-util.js  file://C:\\Users\\Administrator\\Desktop\\wx.util.js\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("查看代理是否生效")])]),t._v(" "),s("p",[t._v("在页面资源面板中使用 "),s("code",[t._v("control+p")]),t._v("搜索 "),s("code",[t._v("wx-util.js")]),t._v(", 发现资源已经被代理到本地（源码），然后就可以快乐的 debugger 了！")]),t._v(" "),s("p",[s("strong",[t._v("更多代理")])]),t._v(" "),s("p",[t._v("在 windows 代理服务器设置"),s("strong",[t._v("本机 ip + 端口号 8899")]),t._v(" （win7 在 ie 中设置），然后微信开发者工具就可以使用默认的系统代理，不必配置了。")]),t._v(" "),s("p",[t._v("配置好后 支持 h5 访问类型的抓包，如： Firefox 浏览器，微信里的公众号、小程序等。")]),t._v(" "),s("h2",{attrs:{id:"参考文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://wproxy.org/whistle/install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档 - whistle 安装启动"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://wproxy.org/whistle/webui/https.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档 - 安装根证书"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);