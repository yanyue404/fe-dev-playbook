<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Whistle | fe-dev-playbook</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="https://avatars1.githubusercontent.com/u/24217900?s=200&amp;v=4">
    <meta name="description" content="打造舒适高效的前端开发环境">
    <meta name="keywords" itemprop="keywords" content="打造舒适的前端开发环境">
    <meta property="og:title" content="fe-dev-playbook">
    <meta property="og:description" content="前端开发环境">
    
    <link rel="preload" href="/fe-dev-playbook/assets/css/0.styles.8138ca84.css" as="style"><link rel="preload" href="/fe-dev-playbook/assets/js/app.8b829ca5.js" as="script"><link rel="preload" href="/fe-dev-playbook/assets/js/2.58244656.js" as="script"><link rel="preload" href="/fe-dev-playbook/assets/js/1.6ba70183.js" as="script"><link rel="preload" href="/fe-dev-playbook/assets/js/39.7f815d1c.js" as="script"><link rel="prefetch" href="/fe-dev-playbook/assets/js/10.0720960b.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/11.2a97faa3.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/12.6b9ed61d.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/13.ebfb1f42.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/14.3e65117c.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/15.2d87bde7.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/16.9ca9aae8.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/17.3dbcb51f.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/18.4c170722.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/21.0ad1d6a3.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/22.b7c97fbe.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/23.e20f55d6.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/24.894363fb.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/25.4f7566b2.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/26.12bb218b.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/27.17e0d8bb.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/28.968af0ea.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/29.dc450261.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/3.bc6bba9e.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/30.b23d21b8.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/31.6bdcee5c.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/32.15a0ad6b.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/33.5618359b.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/34.7e17a6da.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/35.744d1ba4.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/36.41015bb7.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/37.46d57f6c.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/38.5ddeeac4.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/4.45665f8a.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/5.7098d77a.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/7.6a854e57.js"><link rel="prefetch" href="/fe-dev-playbook/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/fe-dev-playbook/assets/css/0.styles.8138ca84.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-dev-playbook/" class="home-link router-link-active"><!----> <span class="site-name">fe-dev-playbook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe-dev-playbook/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="https://github.com/yanyue404/fe-dev-playbook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe-dev-playbook/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="https://github.com/yanyue404/fe-dev-playbook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-dev-playbook/guide/Shell.html" class="sidebar-link">终端</a></li><li><a href="/fe-dev-playbook/guide/Nodejs.html" class="sidebar-link">Node.js</a></li><li><a href="/fe-dev-playbook/guide/VSCode.html" class="sidebar-link">VS Code</a></li><li><a href="/fe-dev-playbook/guide/BreakingPoint.html" class="sidebar-link">断点调试</a></li><li><a href="/fe-dev-playbook/guide/Ts.html" class="sidebar-link">TypeScript</a></li><li><a href="/fe-dev-playbook/guide/Git.html" class="sidebar-link">Git</a></li><li><a href="/fe-dev-playbook/guide/Chrome.html" class="sidebar-link">Chrome</a></li><li><a href="/fe-dev-playbook/guide/Whistle.html" aria-current="page" class="active sidebar-link">Whistle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-dev-playbook/guide/Whistle.html#说明" class="sidebar-link">说明</a></li><li class="sidebar-sub-header"><a href="/fe-dev-playbook/guide/Whistle.html#操作步骤" class="sidebar-link">操作步骤</a></li><li class="sidebar-sub-header"><a href="/fe-dev-playbook/guide/Whistle.html#下载" class="sidebar-link">下载</a></li><li class="sidebar-sub-header"><a href="/fe-dev-playbook/guide/Whistle.html#安装-whistle-证书" class="sidebar-link">安装 whistle 证书</a></li><li class="sidebar-sub-header"><a href="/fe-dev-playbook/guide/Whistle.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/fe-dev-playbook/guide/Whistle.html#参考文档" class="sidebar-link">参考文档</a></li></ul></li><li><a href="/fe-dev-playbook/guide/Fe.html" class="sidebar-link">前端开发</a></li><li><a href="/fe-dev-playbook/guide/Vim.html" class="sidebar-link">Vim</a></li><li><a href="/fe-dev-playbook/guide/Command.html" class="sidebar-link">Shell命令</a></li><li><a href="/fe-dev-playbook/guide/Utils.html" class="sidebar-link">Utils</a></li><li><a href="/fe-dev-playbook/guide/Tips.html" class="sidebar-link">前端开发小提示</a></li><li><a href="/fe-dev-playbook/guide/Algorithm.html" class="sidebar-link">算法</a></li><li><a href="/fe-dev-playbook/guide/Github.html" class="sidebar-link">Github 工作流</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="whistle"><a href="#whistle" class="header-anchor">#</a> Whistle</h1> <blockquote><p>https://github.com/yanyue404/blog/issues/204</p></blockquote> <blockquote><p><a href="http://wproxy.org/whistle/webui/rules.html" target="_blank" rel="noopener noreferrer">whistle 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>Whistle 最强大的代理服务器，与 Charles 相比我用 Whistle。</p> <h2 id="说明"><a href="#说明" class="header-anchor">#</a> 说明</h2> <p>whistle(读音[ˈwɪsəl]，拼音[wēisǒu])基于 Node 实现的跨平台 web 调试代理工具，类似的工具有 Windows 平台上的 Fiddler，主要用于查看、修改 HTTP、HTTPS、Websocket 的请求、响应，也可以作为 HTTP 代理服务器使用。</p> <h2 id="操作步骤"><a href="#操作步骤" class="header-anchor">#</a> 操作步骤</h2> <ol><li>pc 机 npm 安装 whistle；</li> <li>pc 机安装 whistle https 根证书；</li> <li>pc 机运行 whistle (w2 start)，配置浏览器代理 127.0.0.1:8899，浏览器访问 http://127.0.0.1:8899/ (至此完成 pc 机代理)</li> <li>pc 机开启移动热点，获取本机 ip 地址；</li> <li>ios 或 安卓设备连接热点，手动配置 pc 机 ip 代理；</li> <li>扫码 或浏览器访问 rootca.pro，安装 whistle https 根证书，设置证书受信任；</li> <li>真机访问 h5 类的目标域名网页，可以被 pc 机 whistle 代理成功捕获。（至此完成真机代理）</li></ol> <h2 id="下载"><a href="#下载" class="header-anchor">#</a> 下载</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 安装或更新</span>
$ <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> whistle

<span class="token comment"># 或者直接指定镜像安装：</span>
$ <span class="token function">npm</span> <span class="token function">install</span> whistle <span class="token parameter variable">-g</span> <span class="token parameter variable">--registry</span><span class="token operator">=</span>https://registry.npm.taobao.org
</code></pre></div><h2 id="安装-whistle-证书"><a href="#安装-whistle-证书" class="header-anchor">#</a> 安装 whistle 证书</h2> <p>下载根证书，开启捕获 HTTPS 请求：</p> <img src="https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/https-proxy.png" width="50%" height="50%"> <p>配置手机代理：</p> <p>IP 地址由 观察 pc 机 ipconfig 获得。</p> <div><img src="https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/phone1.jpg" width="40%" height="50%" style="margin-right:10px;"> <img src="https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/phone2.jpg" width="40%" height="50%" style="float:right;"></div> <p><strong>PC 机</strong></p> <p>windows: 下载证书后，双击证书，根据指引安装证书。证书安装过程，要确保证书存储到受信任的根证书颁发机构下。</p> <p>注意： 只有 HTTPS 为对勾时才说明根证书安装成功，可以成功代理 HTTPS 类型的请求。</p> <p><strong>IOS 设备</strong></p> <p>手机设置代理后，Safari 地址栏输入 rootca.pro，按提示安装证书（或者通过 whistle 控制台的二维码扫码安装，iOS 安装根证书需要到连接远程服务器进行验证，需要暂时把 Https 拦截功能关掉）。</p> <p>iOS 10.3 之后需要手动信任自定义根证书，设置路径：设置&gt; 外观 &gt; 关于本机&gt; 证书信任设置</p> <p><strong>安卓设备</strong></p> <p>手机设置代理后，证书通过二维码扫码安装或者浏览器地址栏 rootca.pro 按提示安装，安装成功后，需要手机将连接笔记本电脑的 wifi 设为 可信任网络才能正常抓取 https 网络请求。</p> <h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <p><strong>浏览器代理： 安装 Chrome 代理插件：（推荐安装 SwitchyOmega）</strong></p> <img src="https://raw.githubusercontent.com/yanyue404/blog/master/assets/whistle/SwitchySharp.png" width="50%" height="50%"> <div class="language-bash extra-class"><pre class="language-bash"><code>
<span class="token comment"># 开启代理监听 http://127.0.0.1:8899/</span>
w2 start

<span class="token comment"># filter， 在 Network 不会出现某些域名的请求</span>
/<span class="token punctuation">[</span>traceback.tk.cn<span class="token punctuation">]</span><span class="token punctuation">(</span>http://traceback.tk.cn/<span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">[</span>tia6.taikang.com/<span class="token punctuation">]</span><span class="token punctuation">(</span>http://tia6.taikang.com/<span class="token punctuation">)</span> filter://hide

<span class="token comment"># req ua</span>
<span class="token punctuation">[</span>m.aliexpress.com<span class="token punctuation">]</span><span class="token punctuation">(</span>http://m.aliexpress.com/<span class="token punctuation">)</span> ua://<span class="token punctuation">{</span><span class="token punctuation">{</span>wp_ua<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment"># reqHeaders，修改请求头</span>
<span class="token punctuation">[</span>m.aliexpress.com<span class="token punctuation">]</span><span class="token punctuation">(</span>http://m.aliexpress.com/<span class="token punctuation">)</span> reqHeaders://<span class="token punctuation">{</span><span class="token punctuation">{</span>req-headers<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment"># 使用 内置的 Weinre 调试移动端页面，然后选择菜单栏的 Weinre 进入看到调试界面了</span>
<span class="token comment"># http://127.0.0.1:8899/weinre/client/#test</span>

http://www.qq.com/  weinre://test

<span class="token comment"># 配置规则（线上代理到本地调试）</span>
//<span class="token punctuation">[</span>m.tk.cn/tkproperty/prd/N20210002/<span class="token punctuation">]</span><span class="token punctuation">(</span>http://m.tk.cn/tkproperty/prd/N20210002/<span class="token punctuation">)</span>  localhost:3334/tkproperty/prd/N20210002/

<span class="token comment"># 单个文件代理到 values 面板（新建 local_reference.js 文件, 完全替换）</span>
//<span class="token punctuation">[</span>mcdn.tk.cn/js/reference.js<span class="token punctuation">]</span><span class="token punctuation">(</span>http://mcdn.tk.cn/js/reference.js<span class="token punctuation">)</span> resBody://<span class="token punctuation">{</span>local_reference.js<span class="token punctuation">}</span>

<span class="token comment"># 设置 延迟响应的时间（单位：毫秒）</span>
https://ecuat.tk.cn/tkol-api/tkcms/selectByProductId resDelay://3000

<span class="token comment"># 修改返回码，可以模拟接口出错</span>
https://ecuat.tk.cn/tkol-api/tkcms/selectByProductId statusCode://500

<span class="token comment"># 在网页中注入以 script 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 “Value” 下可找到：</span>
https://wq.jd.com/ jsAppend://<span class="token punctuation">{</span>test.js<span class="token punctuation">}</span> https://wq.jd.com/ jsAppend:///Users/myname/test/test.js

<span class="token comment"># 在网页中注入以 style 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 “Value” 下可找到：</span>
https://wq.jd.com/ cssAppend://<span class="token punctuation">{</span>test.css<span class="token punctuation">}</span> https://wq.jd.com/ cssAppend:///Users/myname/test/test.css

<span class="token comment"># log 日志分组</span>
http://localhost:49804/tkproperty/nprd/N20210001/ log://N20210001

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// test.js</span>
<span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;jquery 注入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// VConsole.js</span>
<span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/vConsole/3.1.0/vconsole.min.js&quot;</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;VConsole 注入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">new</span> <span class="token class-name">VConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* test.css */</span>
<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>values</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{wp_ua}
  Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; RM-1113) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/13.10586

{req-headers}
  {
    &quot;X-Forwarded-For&quot;:&quot; 188.146.171.71&quot;,
    &quot;X-Real-IP&quot;:&quot; 188.146.171.71&quot;,
    &quot;X-Client-Scheme&quot;:&quot;https&quot;,
    &quot;referer&quot;:&quot;https://vk.com/&quot;,
    &quot;User-Agent&quot;:&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 AliApp(H/5)&quot;
  }
</code></pre></div><p><strong>其他命令</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看whistle的帮助信息</span>
$ w2 <span class="token builtin class-name">help</span>

<span class="token comment"># 停止 whistle：</span>
$ w2 stop

<span class="token comment"># 重启 whistle：</span>
$ w2 restart
</code></pre></div><p><strong>Q&amp;A</strong></p> <ol><li>证书信任问题
Q: 苹果手机代理已配置，且已经信任证书打开调试显示无法链接？
A: 苹果手机还需要手动开启 whistle 的证书信任。参下图手动开启。</li></ol> <img src="https://github.com/yanyue404/blog/blob/master/assets/whistle/trust-certificate.jpg?raw=true" width="50%" height="50%"> <ol start="2"><li>真机样式调试</li></ol> <p>在标签栏选择 <strong>Weinre</strong> 标签进入，选择 Targets 的链接进入页面。</p> <p>···bash
https://f.tk.cn/tkproperty/nprd/N20220012/ weinre://0012</p> <div class="language- extra-class"><pre class="language-text"><code>

## 真机代理

**安卓设备**

注意：

1. 如果配置完代理，手机无法访问，可能是 whistle 所在的电脑防火墙限制了远程访问 whistle 的端口，关闭防火墙或者设置白名单。

4. 安装证书后，如无法正常捕获请求，需要将连接笔记本电脑的 wifi 设为 **可信任网络**。

**微信公众号**

1. 启动 whistle 后，先配置**微信开发者工具**代理:

最上边一栏 ---- 设置 ---- 代理设置 ---- 设置本机 ip 加 端口号 8899

4. 设置代理规则

```bash
# 线上混淆代码代理到本地源码
//mcdn.tk.cn/tk-online/assets/public-js/lib/property/wx-util.js  file://C:\Users\Administrator\Desktop\wx.util.js
</code></pre></div><ol start="5"><li>查看代理是否生效</li></ol> <p>在页面资源面板中使用 <code>control+p</code>搜索 <code>wx-util.js</code>, 发现资源已经被代理到本地（源码），然后就可以快乐的 debugger 了！</p> <p><strong>更多代理</strong></p> <p>在 windows 代理服务器设置<strong>本机 ip + 端口号 8899</strong> （win7 在 ie 中设置），然后微信开发者工具就可以使用默认的系统代理，不必配置了。</p> <p>配置好后 支持 h5 访问类型的抓包，如： Firefox 浏览器，微信里的公众号、小程序等。</p> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ul><li><a href="http://wproxy.org/whistle/install.html" target="_blank" rel="noopener noreferrer">官方文档 - whistle 安装启动<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://wproxy.org/whistle/webui/https.html" target="_blank" rel="noopener noreferrer">官方文档 - 安装根证书<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe-dev-playbook/guide/Chrome.html" class="prev">
        Chrome
      </a></span> <span class="next"><a href="/fe-dev-playbook/guide/Fe.html">
        前端开发
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fe-dev-playbook/assets/js/app.8b829ca5.js" defer></script><script src="/fe-dev-playbook/assets/js/2.58244656.js" defer></script><script src="/fe-dev-playbook/assets/js/1.6ba70183.js" defer></script><script src="/fe-dev-playbook/assets/js/39.7f815d1c.js" defer></script>
  </body>
</html>
